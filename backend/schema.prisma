// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource postgresql {
  url      = env("DATABASE_URL")
  provider = "postgresql"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model wb_user {
  id                      Int            @id @default(autoincrement())
  username                String         @default("")
  email                   String         @unique @default("")
  password                String?
  cart_item               wb_cart_item[] @relation("wb_cart_item_id_user")
  orders                  wb_order[]     @relation("wb_order_user")
  id_role                 wb_role?       @relation("wb_user_id_role", fields: [id_roleId], references: [id])
  id_roleId               Int?           @map("id_role")
  passwordResetToken      String?
  passwordResetIssuedAt   DateTime?
  passwordResetRedeemedAt DateTime?
  magicAuthToken          String?
  magicAuthIssuedAt       DateTime?
  magicAuthRedeemedAt     DateTime?

  @@index([id_roleId])
}

model wb_product {
  id                           Int               @id @default(autoincrement())
  name                         String            @default("")
  description                  String            @default("")
  id_product_image             wb_product_image? @relation("wb_product_id_product_image", fields: [id_product_imageId], references: [id])
  id_product_imageId           Int?              @unique @map("id_product_image")
  status                       String?           @default("DRAFT")
  price                        Int?
  from_wb_cart_item_id_product wb_cart_item[]    @relation("wb_cart_item_id_product")
}

model wb_product_image {
  id                                  Int             @id @default(autoincrement())
  image                               Json?
  alt_text                            String          @default("")
  product                             wb_product?     @relation("wb_product_id_product_image")
  from_wb_order_item_id_product_image wb_order_item[] @relation("wb_order_item_id_product_image")
}

model wb_cart_item {
  id           Int         @id @default(autoincrement())
  quantity     Int         @default(1)
  id_product   wb_product? @relation("wb_cart_item_id_product", fields: [id_productId], references: [id])
  id_productId Int?        @map("id_product")
  id_user      wb_user?    @relation("wb_cart_item_id_user", fields: [id_userId], references: [id])
  id_userId    Int?        @map("id_user")

  @@index([id_productId])
  @@index([id_userId])
}

model wb_order {
  id         Int             @id @default(autoincrement())
  total      Int?
  order_item wb_order_item[] @relation("wb_order_item_id_order")
  user       wb_user?        @relation("wb_order_user", fields: [userId], references: [id])
  userId     Int?            @map("user")
  charge     String          @default("")

  @@index([userId])
}

model wb_order_item {
  id                 Int               @id @default(autoincrement())
  name               String            @default("")
  description        String            @default("")
  id_product_image   wb_product_image? @relation("wb_order_item_id_product_image", fields: [id_product_imageId], references: [id])
  id_product_imageId Int?              @map("id_product_image")
  price              Int?
  quantity           Int?
  id_order           wb_order?         @relation("wb_order_item_id_order", fields: [id_orderId], references: [id])
  id_orderId         Int?              @map("id_order")

  @@index([id_product_imageId])
  @@index([id_orderId])
}

model wb_role {
  id                   Int       @id @default(autoincrement())
  name                 String    @default("")
  canManageProducts    Boolean   @default(false)
  canSeeOtherUsers     Boolean   @default(false)
  canManageUsers       Boolean   @default(false)
  canManageRoles       Boolean   @default(false)
  canManageCart        Boolean   @default(false)
  canManageOrders      Boolean   @default(false)
  from_wb_user_id_role wb_user[] @relation("wb_user_id_role")
}